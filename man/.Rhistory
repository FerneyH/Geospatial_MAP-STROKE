indicators_url <- "https://ephtracking.cdc.gov/apigateway/api/v1/indicators"
indicators <- fromJSON(content(GET(indicators_url), "text"))
install.packages("httr")
install.packages("jsonlite")
library(httr)
library(jsonlite)
indicators_url <- "https://ephtracking.cdc.gov/apigateway/api/v1/indicators"
indicators <- fromJSON(content(GET(indicators_url), "text"))
View(indicators)
# === Define Parameters ===
indicator_id <- 197  # From query panel
state_fips <- "04"   # Arizona
# === Build URL ===
url <- paste0("https://ephtracking.cdc.gov/apigateway/api/v1/item/",
indicator_id, "?stateFips=", state_fips)
# === API Call ===
res <- GET(url)
stop_for_status(res)
# === Parse JSON ===
data_json <- fromJSON(content(res, "text", encoding = "UTF-8"))
# === View structure ===
str(data_json$data, max.level = 2)
data_json
